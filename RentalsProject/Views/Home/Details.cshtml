﻿@using Microsoft.AspNetCore.Identity

@model RentalsProject.Models.RentalListing

@{
    ViewData["Title"] = "Details";
}

<h1>Details Rental Listing</h1>

<hr />

<div>
    <dl class="row">
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.ListingSummary)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.ListingSummary)
        </dd>

        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.City)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.City)
        </dd>

        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Province)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Province)
        </dd>

        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.ListingPricePerDay)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.ListingPricePerDay)
        </dd>

        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.NumberOfBedrooms)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.NumberOfBedrooms)
        </dd>

        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.NumberOfBathrooms)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.NumberOfBathrooms)
        </dd>

        @if (Model.HasRentalImage)
        {
            <dd>
                <a asp-action="Display" asp-controller="Image" asp-route-id="@Model.RentalImageId">
                    <img src="@Url.Action("Display","Image", new {Id = Model.RentalImageId})" alt="Rental Image" />
                </a>
            </dd>
        }
    </dl>
</div>

<div>
    <a asp-action="Index">Back to Home</a> |

    @if (User.Identity.IsAuthenticated) // Ensure the user is logged in
    {
        <a asp-action="Create" asp-controller="Reservations" asp-route-rentalListingId="@Model.Id">Book Reservation</a>

        @Html.Raw(" | ")

        <a asp-action="MyReservations" asp-controller="Reservations">Back to My Rental Reservations</a>
    }
    else
    {
        <p class="text-danger">You need to log in to book a reservation.</p>
    }
</div>